# We import the markdown library
import markdown
import sqlite3
from flask import Flask
from flask import render_template
from flask import Markup

app = Flask(__name__)

@app.template_filter("markdown")
def render_markdown(markdown_text):
    return Markup(markdown.markdown(markdown_text))

@app.route('/')
def index():
    # db = get_db()
    con = sqlite3.connect('faq.db')
    cur = con.cursor()
    cur2 = cur.execute('select title, text from entries order by id desc')
    # db = sqlite3.connect('faq.db') # Creates or opens a file called mydb with a SQLite3 DB
    # cur = db.execute('select text from entries order by id desc') # cursor
    # entries = [Markup(markdown.markdown(entry)) for entry in cur.fetchall()]
    entries=cur2.fetchall()
    return render_template('index.html', entries=entries)

#   content = """
# Chapter
# =======

# Section
# -------

# * Item 1
# * Item 2
# """
#   content = Markup(markdown.markdown(content))
#   return render_template('index.html', **locals())

app.run(debug=True)
